<!DOCTYPE html>
<link rel="stylesheet" href="star_style.css">
<head>
    <link rel="icon" href="https://i.pinimg.com/736x/ea/db/95/eadb95e3503722bf872a070fea5641cb.jpg" type="image/png">
    <title>STAR WARS: expanded universe</title>
    <div class="head-container">
        <div class="image-container">
            <img src="ss.gif">
            <h1>STAR WARS</h1>
            <h2>expanded universe</h2>
            <div class="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
            <ul class="nav">
                <li><a href="index.html">–•—Ä–æ–Ω–æ–ª–æ–≥–∏—è</a></li>
                <li><a href="test.html">–ß—Ç–æ –ø–æ—á–∏—Ç–∞—Ç—å?</a></li>
                <li><a href="allbooks.html">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</a></li>
                <li><a href="contacts.html">–ñ–∞–ª–æ–±—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</a></li>
            </ul>
            <script>
                const navToggle = document.querySelector('.nav-toggle');
                const nav = document.querySelector('.nav');
        
                navToggle.addEventListener('click', () => {
                    navToggle.classList.toggle('active');
                    nav.classList.toggle('active');
                });
            </script>

            <style>
                #itemList {
                    margin-top: 20px;
                    list-style-type: none;
                }
            </style>
    </div>

    <script>
        function generateCaptcha() {
            const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
            let captchaText = '';
            for (let i = 0; i < 5; i++) {
                captchaText += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            document.getElementById('captcha').innerText = captchaText;
            return captchaText;
        }

        function generateNumbersCaptcha() {
            const N = Math.floor(Math.random() * 10) + 1;
            const M = Math.floor(Math.random() * 10) + 1;
            document.getElementById('numbers').innerText = `${N} + ${M} =`;
            document.getElementById('correctSum').value = N + M;
        }

        function isEmpty(obj) {
            return Object.keys(obj).length === 0;
        }

        function validateCaptcha() {
            const captchaInput = document.getElementById('captchaInput').value;
            const captchaValue = document.getElementById('captcha').innerText;

            if (isEmpty(captchaInput)) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–∞–ø—á—É.');
                return;
            }

            if (captchaInput === captchaValue) {
                document.getElementById('submitBtn').disabled = false;
                alert('–ö–∞–ø—á–∞ –≤–≤–µ–¥–µ–Ω–∞ –≤–µ—Ä–Ω–æ. –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–Ω–∏–º–∞–Ω–∏–µ.');
            } else {
                alert('–ö–∞–ø—á–∞ –Ω–µ–≤–µ—Ä–Ω–∞.');
                generateCaptcha();
                document.getElementById('submitBtn').disabled = true;
            }
        }

        function validateNumbersCaptcha() {
            const userSum = document.getElementById('userSum').value;
            const correctSum = document.getElementById('correctSum').value;

            if (isEmpty(userSum)) {
                alert('–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —á–∏—Å–µ–ª.');
                return;
            }

            if (parseInt(userSum) === parseInt(correctSum)) {
                document.getElementById('submitBtn').disabled = false;
                alert('–°—É–º–º–∞ –≤–≤–µ–¥–µ–Ω–∞ –≤–µ—Ä–Ω–æ. –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–Ω–∏–º–∞–Ω–∏–µ.');
            } else {
                alert('–°—É–º–º–∞ –Ω–µ–≤–µ—Ä–Ω–∞.');
                generateNumbersCaptcha();
                document.getElementById('submitBtn').disabled = true;
            }
        }

        window.onload = function() {
            generateCaptcha();
            generateNumbersCaptcha();
        };
    </script>
</head>
<body>
    <script>
        let isDrawing = false;
        let elements = [];
        
        document.addEventListener('dblclick', function(e) {
          isDrawing = !isDrawing; // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∏—Å–æ–≤–∞–Ω–∏—è
          if (isDrawing) {
            document.addEventListener('mousemove', drawElement);
          } else {
            document.removeEventListener('mousemove', drawElement);
          }
        });
        
        function drawElement(e) {
          const element = document.createElement('div');
          element.classList.add('draw-element');
          element.style.left = e.pageX + 'px';
          element.style.top = e.pageY + 'px';
          document.body.appendChild(element);
          elements.push(element);
          setTimeout(() => {
            element.classList.add('fade-out');
            setTimeout(() => {
              document.body.removeChild(element);
          }, 500);
          }, 3000);
        }
    </script>
    <div class="content">
    <div id="captcha-container">
        <div class="captcha">
            <h2>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –≤—ã –Ω–µ –¥—Ä–æ–∏–¥, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å</h2>
            <div id="cont">
        <strong>–í–≤–µ–¥–∏—Ç–µ –∫–∞–ø—á—É:</strong>
        <span id="captcha" style="background-image: url(images/captch.png); background-color: transparent; border: none; background-size: cover;"></span>
        <input type="text" id="captchaInput" />
        <br><button class="lngbtn" id="capbtn" onclick="validateCaptcha()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–ø—á—É</button>
            </div>
            <div id="cont">
        <strong>–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —á–∏—Å–µ–ª:</strong>
        <span id="numbers"></span>
        <input type="text" id="userSum" />
        <input type="hidden" id="correctSum" />
        <br><button class="lngbtn" id="sumbtn" onclick="validateNumbersCaptcha()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É–º–º—É</button>
            </div>
            <div>
        <button id="submitBtn" disabled onclick="this.parentNode.parentNode.parentNode.remove(); return false;">X</button>
            </div>
    </div>
    </div>
    <h2 id="cont" style="font-size: 200%;">–ú—ã –≤—Å–µ–≥–¥–∞ —Ä–∞–¥—ã –Ω–æ–≤—ã–º –∏–¥–µ—è–º. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ –∑–∞–±—É–¥—å—Ç–µ —É–∫–∞–∑–∞—Ç—å –∏–º—è, —á—Ç–æ–±—ã –º—ã –∑–Ω–∞–ª–∏, –∫–æ–º—É —Å–∫–∞–∑–∞—Ç—å —Å–ø–∞—Å–∏–±–æ.</h2>
    <div id="cont">
        <h3 style="font-size: 150%;">–ò–º—è</h3>
        <input type="text" id="ignore">
        <h3 style="font-size: 150%;">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</h3>
        <textarea type="text" id="textInput"></textarea>
        <br><button class="lngbtn" id="addButton">–æ—Ç–ø—Ä–∞–≤–∏—Ç—å</button></br>
    </div>

    <script>
        const maxLength = 50;
        function truncateText(text, maxLength){
            if (text.length > maxLength){
                return text.slice(0, maxLength) + '...';
            }
            return text;
        }
        document.getElementById("addButton").addEventListener("click", function() {
            var input = document.getElementById("textInput");
            var text = input.value.trim();

            if (text !== "") {
                var listItem = document.createElement("li");
                listItem.textContent = truncateText(text, maxLength);
                document.getElementById("itemList").appendChild(listItem);
                input.value = ""; // –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞
            } else {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç.");
            }
        });
    </script>

    <script>
        let originalHeight = window.innerHeight;
        window.addEventListener('resize', () => {
            if (window.innerHeight < originalHeight){
                document.getElementsByClassName('lngbtn').style.display = `none`;
            }
            else{
                document.getElementsByClassName('lngbtn').style.display = `block`;
            }
        });
    </script>

    <div class="notification-container">
        <button class="notification-sign">üíå</button>
        <span class="notification-count">0</span>
        <ul id="itemList"><li>–í–∞—à–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:</li></ul>
    </div>
    </div>
</body>
</html>
